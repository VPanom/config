# Tmux Configuration - Personalized for nvim workflow

# ================================
# PREFIX KEY SETUP
# ================================
# Use Ctrl+Space as prefix (avoids collision with nvim Space leader)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# ================================
# GENERAL SETTINGS
# ================================
# Enable mouse support
set -g mouse on

# Start windows and panes at 1 (not 0)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer
set -g history-limit 10000

# Enable clipboard integration
set -g set-clipboard on

# ================================
# NAVIGATION (matching nvim style)
# ================================
# Pane navigation with arrow keys (matching your nvim <leader><arrow> bindings)
bind Left select-pane -L
bind Down select-pane -D
bind Up select-pane -U
bind Right select-pane -R

# Alternative: hjkl navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Window navigation (matching your nvim F6/F7 tab navigation)
bind -n F6 previous-window
bind -n F7 next-window
bind -n F5 new-window
bind -n F8 confirm-before -p "Kill window #W? (y/n)" kill-window

# ================================
# WINDOW MANAGEMENT & RESIZING
# ================================
# Pane resizing (matching your nvim +/- resize bindings)
bind -r + resize-pane -U 5
bind -r - resize-pane -D 5
bind -r < resize-pane -L 5
bind -r > resize-pane -R 5

# Split panes more intuitively (Swedish keyboard friendly)
bind v split-window -h -c "#{pane_current_path}"  # Ctrl+Space + v for vertical split
bind - split-window -v -c "#{pane_current_path}"  # Ctrl+Space + - for horizontal split

# Create new window in current path
bind c new-window -c "#{pane_current_path}"

# Session management
bind s choose-tree -Zs  # Ctrl+Space + s for session chooser

# ================================
# TERMINAL INTEGRATION
# ================================
# Quick terminal spawn (matching your nvim <leader>t)
bind t new-window -c "#{pane_current_path}"

# Vi mode in copy mode
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# ================================
# STATUS BAR (matching lualine aesthetic)
# ================================
# Status bar position
set -g status-position bottom

# Status bar colors (Tokyo Night inspired)
set -g status-bg "#1a1b26"
set -g status-fg "#c0caf5"

# Window status
setw -g window-status-current-style "fg=#7aa2f7,bg=#3b4261"
setw -g window-status-style "fg=#565f89"

# Status bar content
set -g status-left "#[fg=#7aa2f7]#{session_name} "
set -g status-right "#[fg=#9ece6a]%H:%M #[fg=#bb9af7]%d-%b"

# Pane borders - make active pane very obvious
set -g pane-border-style "fg=#3b4261"
set -g pane-active-border-style "fg=#a85b2b"  # Much darker autumn orange active border
set -g pane-border-status top  # Show pane info at top
set -g pane-border-format " #{pane_index} #{pane_current_command} "

# ================================
# RELOAD CONFIG
# ================================
bind r source-file ~/.tmux.conf \; display "Config reloaded!"